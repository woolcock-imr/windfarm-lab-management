<div id=D__ID>
    <section id=form_container__ID>
        <div id=header__ID>
        </div>
        <form id=F__ID>
            <div class="container">
                <!-- participant part for all tsak forms -------------------->
                <div class="row row__ID" id=row_participant__ID>
                    <div class="col-sm-12 col-lg-9 input__ID">
                        <span class=label__ID>Participant</span><br>
                        <input type=text name="Participant" class=form-control id=Participant__ID
                            data-id="Participant" />
                    </div>
                    <div class="col-sm-12 col-lg-3 input__ID">
                        <span class=label__ID>Participant ID</span><br>
                        <input type=text name="Participant_uid" class=form-control readonly />
                    </div>
                    <hr style="border-top: 1px solid #888;width: 100%;margin:10px 0">
                </div>
                <!---------------------------------------------------->

                <!-- Form Inputs-------------------------------------->
                <input name=file_name type=file /><br><br>
                <div id=dynamic_part__ID></div>
                <!---------------------------------------------------->


                <!-- submit button part for all tsak forms------------>
                <br>
                <div class="row">
                    <div class=col>
                        <button id=submit__ID type="submit" class="btn btn-secondary">Submit</button>
                    </div>
                </div>
                <!---------------------------------------------------->
            </div>
        </form>
    </section>
    VmInclude:__COMPONENT__/m/model.01.html
    <script>
        function F__ID() {
            //-------------------------------------
            var fields = "PSG_File_Name,Patient_name,Study_Date,Study_Start_Time,Study_End_Time,Wake_After_Sleep_Onset_Minutes,Time_in_Bed_min,Sleep_Latency_min,REM_Latency_min,Sleep_Efficiency_percent,Total_Time_Awake_During_Sleep_Period_min,Total_Sleep_Time_min,NREM_min,NREM_percent,REM_min,REM_percent,Stage_1_min,Stage_1_percent,Stage_2_min,Stage_2_percent,Stage_3_min,Stage_3_percent,Total_Arousal_Count_TST,Total_Arousal_Count_REM,Total_Arousal_Count_NREM,Total_Arousals_Index_TST,Total_Arousals_Index_REM,Total_Arousals_Index_NREM,Respiratory_Arousal_Count_TST,Respiratory_Arousal_Count_REM,Respiratory_Arousal_Count_NREM,Respiratory_Arousals_Index_TST,Respiratory_Arousals_Index_REM,Respiratory_Arousals_Index_NREM,Spontaneous_Arousal_Count_TST,Spontaneous_Arousal_Count_REM,Spontaneous_Arousal_Count_NREM,Spontaneous_Arousals_Index_TST,Spontaneous_Arousals_Index_REM,Spontaneous_Arousals_Index_NREM,Limb_Movement_Arousal_Count_TST,Limb_Movement_Arousal_Count_REM,Limb_Movement_Arousal_Count_NREM,Limb_Movement_Arousals_Index_TST,Limb_Movement_Arousals_Index_REM,Limb_Movement_Arousals_Index_NREM";
            $('#header__ID').text("Form Name");
            //-------------------------------------
            var fs = fields.split(',');
            var txt = "";
            for (var i = 0; i < fs.length; i++) {
                txt += "<div class='row row__ID'><div class='col'>\r\n";
                txt += "<span>" + fs[i] + "</span><input type=text class=form-control name=" + fs[i] + ">\r\n";
                txt += "</div></div>\r\n";
            }
            $('#dynamic_part__ID').html(txt);
            //-------------------------------------
            VmInclude:__COMPONENT__/f/form.01.js
            VmInclude:__CURRENT_PATH__/task-form.js
            //-------------------------------------
            
            $('#F__ID').find('input[type=file]').on('change', function (evt) {
                var file = this.files[0];
                $('#F__ID').find("input[name='PSG_File_Name']").val(file.name);
                read_file(file);
            });


            var read_file=function(file){
                var reader = new FileReader();
                reader.onload = (function(e) {
                    var contents = e.target.result;
                    var lines=contents.replace(/"/g,'').replace(/\r/,'\n').replace(/\n\n/,'\n').split('\n');
                    for(i=0;i<lines.length;i++){
                        var items=lines[i].split(/=/);
                        if(items.length==2){
                            var left=items[0].trim().replace(/ /g,'');
                            var right=items[1].trim().replace(/ /g,'');
console.log(left)
console.log(right)
                            switch(left) {
					case 'Patientname': $('#F__ID').find("input[name='Patient_name']").val(right); break;
					case 'StudyDate': $('#F__ID').find("input[name='Study_Date']").val(right); break;
					case 'StudyStartTime': $('#F__ID').find("input[name='Study_Start_Time']").val(right); break;
					case 'StudyEndTime': $('#F__ID').find("input[name='Study_End_Time']").val(right); break;
					case 'WakeAfterSleepOnset(Minutes)': $('#F__ID').find("input[name='Wake_After_Sleep_Onset_Minutes']").val(right); break;
					case 'TimeinBed(min)': $('#F__ID').find("input[name='Time_in_Bed_min']").val(right); break;
					case 'SleepLatency(min)': $('#F__ID').find("input[name='Sleep_Latency_min']").val(right); break;
					case 'REMLatency(min)': $('#F__ID').find("input[name='REM_Latency_min']").val(right); break;
					case 'SleepEfficiency(%)': $('#F__ID').find("input[name='Sleep_Efficiency_percent']").val(right); break;
					case 'TotalTimeAwakeDuringSleepPeriod(min)': $('#F__ID').find("input[name='Total_Time_Awake_During_Sleep_Period_min']").val(right); break;
					case 'TotalSleepTime(min)': $('#F__ID').find("input[name = 'Total_Sleep_Time_min']").val(right); break;
					case 'NREM(min)': $('#F__ID').find("input[name='NREM_min']").val(right); break;
					case 'NREM(%)': $('#F__ID').find("input[name='NREM_percent']").val(right); break;
					case 'REM(min)': $('#F__ID').find("input[name='REM_min']").val(right); break;
					case 'REM(%)': $('#F__ID').find("input[name='REM_percent']").val(right); break;
					case 'Stage1(min)': $('#F__ID').find("input[name='Stage_1_min']").val(right); break;
					case 'Stage1(%)': $('#F__ID').find("input[name='Stage_1_percent']").val(right); break;
					case 'Stage2(min)': $('#F__ID').find("input[name='Stage_2_min']").val(right); break;
					case 'Stage2(%)': $('#F__ID').find("input[name='Stage_2_percent']").val(right); break;
					case 'Stage3(min)': $('#F__ID').find("input[name='Stage_3_min']").val(right); break;
					case 'Stage3(%)': $('#F__ID').find("input[name='Stage_3_percent']").val(right); break;
					case 'TotalArousalCount(TST)': $('#F__ID').find("input[name='Total_Arousal_Count_TST']").val(right); break;
					case 'TotalArousalCount(REM)': $('#F__ID').find("input[name='Total_Arousal_Count_REM']").val(right); break;
					case 'TotalArousalCount(NREM)': $('#F__ID').find("input[name='Total_Arousal_Count_NREM']").val(right); break;
					case 'TotalArousalsIndex(TST)': $('#F__ID').find("input[name='Total_Arousals_Index_TST']").val(right); break;
					case 'TotalArousalsIndex(REM)': $('#F__ID').find("input[name='Total_Arousals_Index_REM']").val(right); break;
					case 'TotalArousalsIndex(NREM)': $('#F__ID').find("input[name='Total_Arousals_Index_NREM']").val(right); break;
					case 'RespiratoryArousalCount(TST)': $('#F__ID').find("input[name='Respiratory_Arousal_Count_TST']").val(right); break;
					case 'RespiratoryArousalCount(REM)': $('#F__ID').find("input[name='Respiratory_Arousal_Count_REM']").val(right); break;
					case 'RespiratoryArousalCount(NREM)': $('#F__ID').find("input[name='Respiratory_Arousal_Count_NREM']").val(right); break;
					case 'RespiratoryArousalsIndex(TST)': $('#F__ID').find("input[name='Respiratory_Arousals_Index_TST']").val(right); break;
					case 'RespiratoryArousalsIndex(REM)': $('#F__ID').find("input[name='Respiratory_Arousals_Index_REM']").val(right); break;
					case 'RespiratoryArousalsIndex(NREM)': $('#F__ID').find("input[name='Respiratory_Arousals_Index_NREM']").val(right); break;
					case 'SpontaneousArousalCount(TST)': $('#F__ID').find("input[name='Spontaneous_Arousal_Count_TST']").val(right); break;
					case 'SpontaneousArousalCount(REM)': $('#F__ID').find("input[name='Spontaneous_Arousal_Count_REM']").val(right); break;
					case 'SpontaneousArousalCount(NREM)': $('#F__ID').find("input[name='Spontaneous_Arousal_Count_NREM']").val(right); break;
					case 'SpontaneousArousalsIndex(TST)': $('#F__ID').find("input[name='Spontaneous_Arousals_Index_TST']").val(right); break;
					case 'SpontaneousArousalsIndex(REM)': $('#F__ID').find("input[name='Spontaneous_Arousals_Index_REM']").val(right); break;
					case 'SpontaneousArousalsIndex(NREM)': $('#F__ID').find("input[name='Spontaneous_Arousals_Index_NREM']").val(right); break;
					case 'LimbMovementArousalCount(TST)': $('#F__ID').find("input[name='Limb_Movement_Arousal_Count_TST']").val(right); break;
					case 'LimbMovementArousalCount(REM)': $('#F__ID').find("input[name='Limb_Movement_Arousal_Count_REM']").val(right); break;
					case 'LimbMovementArousalCount(NREM)': $('#F__ID').find("input[name='Limb_Movement_Arousal_Count_NREM']").val(right); break;
					case 'LimbMovementArousalsIndex(TST)': $('#F__ID').find("input[name='Limb_Movement_Arousals_Index_TST']").val(right); break;
					case 'LimbMovementArousalsIndex(REM)': $('#F__ID').find("input[name='Limb_Movement_Arousals_Index_REM']").val(right); break;
					case 'LimbMovementArousalsIndex(NREM)': $('#F__ID').find("input[name='Limb_Movement_Arousals_Index_(NREM)']").val(right); break;

                            }
                        }
                    }
                    
                })
                reader.readAsText(file);
            };
            //-------------------------------------
        }
    </script>
    <style>
        #D__ID {
            height: 100%;
            overflow: auto;
            animation: vm_module_fadein 1.0s;
            background-color: #fff;
        }

        #form_container__ID {
            margin-top: 20px;
            max-width: 700px;
            margin-left: auto;
            margin-right: auto;
            font-family: Verdana, sans-serif;
            font-size: 15px;
            line-height: 1.5;
        }

        #F__ID {
            border: 1px solid #bbb;
            border-top-width: 0;
            padding: 6px 15px 20px 15px;
        }

        #header__ID {
            background-color: #727b84;
            color: #fff;
            padding: 10px 15px 10px 15px;
            font-size: 120%;
            border: 1px solid #bbb;
            border-bottom-width: 0;
        }

        .row__ID {
            padding: 6px 0;
        }

        .row__ID:hover {
            background-color: rgba(0, 0, 0, 0.1);
        }

        .row__ID span {
            font-weight: bold;
            display: inline-block;
            padding: 5px 0;
        }

        @media screen and (max-width:768px) {
            #form_container__ID {
                padding: 20px 10px 50px 10px;
            }
        }
    </style>
</div>